---
sidebar_label: Conditions de course
sidebar_position: 1
description: Reproduire une condition de course avec asyncio
---

# ğŸŒ€ Conditions de course (asyncio)

## ğŸ¯ Objectif pÃ©dagogique

- Montrer que mÃªme sans threads, des corruptions logiques peuvent apparaÃ®tre.

## ğŸ“œ Ã‰noncÃ©

Ã‰crire un programme qui exÃ©cute plusieurs coroutines qui
incrÃ©mente une variable partagÃ©e. Concevoir le code de faÃ§on Ã 
produire une erreur dans la valeur finale.

Voici un point de dÃ©part, mais ce code ne produit pas d'erreur.

```python
import asyncio

compteur = 0

async def incrementer():
    global compteur
    valeur = compteur
    valeur += 1
    compteur = valeur

async def main():
    global compteur
    await asyncio.gather(
        incrementer(),
        incrementer()
    )
    print(compteur)

if __name__ == "__main__":
    asyncio.run(main())
```