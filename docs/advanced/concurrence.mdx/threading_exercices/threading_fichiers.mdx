---
sidebar_label: Traitement de fichiers
sidebar_position: 5
description: Exercice guidÃ© de traitement de fichiers avec threads
---

# ğŸ“ Traitement de fichiers en parallÃ¨le

## ğŸ¯ Objectif pÃ©dagogique

- Lancer des tÃ¢ches dâ€™I/O disque en parallÃ¨le avec des threads.

## ğŸ“œ Ã‰noncÃ©

Vous allez crÃ©er un mini-outil qui analyse plusieurs fichiers texte et, en
bonus, lit un gros CSV par morceaux.

### Partie 1 â€” Mise en place

1. Ã‰crivez `creer_fichiers_test(dossier="test_fichiers")` qui crÃ©e 10 fichiers `.txt` avec quelques lignes de texte.
2. VÃ©rifiez que les fichiers sont bien crÃ©Ã©s.
3. Ã‰crivez `analyser_fichier_texte(chemin)` qui retourne un dictionnaire avec les champs suivants:
   - `{'taille': bytes, 'lignes': n, 'caracteres': c}`.

### Partie 2 â€” Analyse sÃ©quentielle

Ã‰crivez `traiter_fichiers_sequentiel(dossier)` qui:
   - Parcourt tous les `.txt`, appelle `analyser_fichier_texte`.
   - Mesure le temps total.

### Partie 3 â€” Analyse en parallÃ¨le avec threads

1. Ã‰crivez `traiter_fichiers_threads(dossier)` qui:
   - Utilise `threading.Thread` pour lancer lâ€™analyse de chaque fichier avec la fonction `analyser_fichier_texte(chemin)`.
   - Partage un dict `resultats` protÃ©gÃ© par `threading.Lock` (Ã©critures protÃ©gÃ©es).
   - Mesure le temps total.
2. Comparez les temps avec la baseline sÃ©quentielle.

### Partie 4 â€” Analyse avec ThreadPoolExecutor

1. Ã‰crivez `traiter_fichiers_threadpool(dossier, max_workers=2)` qui:
   - Utilise `concurrent.futures.ThreadPoolExecutor` pour gÃ©rer un pool de threads.
   - Soumet les tÃ¢ches dâ€™analyse et collecte les rÃ©sultats.
2. Comparez les temps avec les versions prÃ©cÃ©dentes.