---
sidebar_label: D√©mineur
sidebar_position: 4
description: D√©mineur dans le terminal
---

# D√©mineur üß®

:::warning

Cet exercice est plus difficile que les pr√©c√©dents.

:::


## üéØ Objectif p√©dagogique

Les objectifs de cet exercice sont :

- Mettre en pratique les fonctions `input` et `print`.
- Vous familiariser avec les boucles imbriqu√©es.
- Vous familiariser avec la gestion de grilles 2D.
- R√©fl√©chir √† la logique d'un programme et structurer son code.

## üìú √ânonc√©

Le jeu [D√©mineur](https://en.wikipedia.org/wiki/Minesweeper_(video_game))
consiste √† r√©v√©ler toutes les cases sans d√©clencher les mines cach√©es. Si vous n'√™tes pas familier
avec le jeu, prenez le temps de faire une petite recherche pour comprendre les r√®gles.

Votre programme doit permettre de :

1. Choisir la taille de la grille.
2. Choisir le nombre de mines.

### D√©roulement du jeu

- Laisser l'utilisateur choisir la taille de la grille (ex. 5 pour 5x5) et le nombre de mines.
- Afficher la grille sous forme de cases masqu√©es (`?`).
- L‚Äôutilisateur s√©lectionne une case en indiquant la ligne et la colonne.
- Si une mine est r√©v√©l√©e, la partie est perdue, et toute la grille doit √™tre affich√©e en r√©v√©lant les positions des mines (`*`).
- Sinon, afficher le nombre de mines adjacentes √† cette case.
- Continuer √† demander √† l'utilisateur de choisir une case jusqu'√† ce qu'il
  touche une mine ou que toutes les cases sans mines soient r√©v√©l√©es.

### üñ•Ô∏è Exemple d‚Äôex√©cution

```
Taille de la grille (ex. 10 pour 10√ó10) : 3
Nombre de mines : 1
? ? ?
? ? ?
? ? ?

Ligne (1‚Äì3) : 2
Colonne (1‚Äì3) : 2

? ? ?
? 1 ?
? ? ?

Ligne (1‚Äì3) : 1
Colonne (1‚Äì3) : 1

0 ? ?
? 1 ?
? ? ?

Ligne (1‚Äì3) : 1
Colonne (1‚Äì3) : 2

0 1 ?
? 1 ?
? ? ?

Ligne (1‚Äì3) : 1
Colonne (1‚Äì3) : 3

üí• BOOM ! Vous avez touch√© une mine. Fin de la partie.

0 1 *
0 1 1
0 0 0
```

### ü§î Comment g√©rer une grille 2D

Pour g√©rer une grille 2D, vous pouvez utiliser une liste de listes. Par
exemple, pour cr√©er une grille de 3 lignes et 3 colonnes, vous pouvez faire
ceci :

```python
grid = []
size = 3
for line in range(size):
    new_line = []
    for colonne in range(size):
        new_line.append("?")
    grid.append(new_line)
```

Ceci donne une grille de 3 lignes et 3 colonnes, initialis√©e avec des `?`.
```python
[["?", "?", "?"], ["?", "?", "?"], ["?", "?", "?"]]
```

Pour acc√©der √† une case de la grille, vous pouvez utiliser l'indexation :
`grid[ligne][colonne]`. La premi√®re indexation retourne une liste repr√©sentant
la ligne et la deuxi√®me indexation retourne la valeur de la colonne dans cette
ligne.

### ü§î Comment placer les mines au hasard

Il y a `size * size` cases dans la grille. Pour placer `n` mines au hasard, il faut
choisir `n` cases parmi ces `size * size` cases. Pour cela, vous pouvez utiliser
la fonction `random.sample` de la biblioth√®que `random`.

```python
import random

size = 5  # Taille de la grille
num_mines = 4  # Nombre de mines

all_positions = list(range(size * size))  # Cr√©e une liste de 0 √† size*size-1
mine_positions = random.sample(all_positions, num_mines)  # Choisit n positions au hasard
```

Ensuite, il faut traduire ces positions en coordonn√©es de la grille. En effet, pour l'instant
la position est un nombre entre `0` et `size * size - 1`.

Je vous laisse r√©fl√©chir, mais les fonctions `//` et `%` vous seront utiles. La
traduction d'indice 1D en 2D est un probl√®me classique, vous serez content de
l'avoir d√©j√† fait plus tard dans votre vie de d√©veloppeur. Pour vous aider,
visuellement pour une grille 3x3 vous voulez convertir ceci :

```python
["?", "?", "?", "?", "?", "?", "?", "?", "?"]
# 0 ,  1 ,  2 ,  3 ,  4 ,  5 ,  6 ,  7 ,  8
```

en cela:

```python
[ ["?",     "?",    "?"],  ["?",    "?",    "?"], ["?",    "?",    "?"]]
# (0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)
```

Donc au niveau des indices, *pour une grille 3x3*, on veut la correspondance suivante :

```
0  -> (0, 0)
1  -> (0, 1)
2  -> (0, 2)
3  -> (1, 0)
4  -> (1, 1)
5  -> (1, 2)
6  -> (2, 0)
7  -> (2, 1)
8  -> (2, 2)
```

### üßô‚Äç‚ôÇÔ∏è Indice

:::tip

On n'√©crit jamais un programme en une seule fois. Il est pr√©f√©rable de le faire
en plusieurs √©tapes qui s'additionnent.

:::

Allez-y √©tape par √©tape.

1. Affichez un message de bienvenue.
2. Demandez √† l'utilisateur la taille de la grille et le nombre de mines.
3. Cr√©ez la grille et placez les mines au hasard.
4. Affichez la grille avec les mines visibles pour tester votre code.
5. Affichez la grille avec les mines masqu√©es (`?`).
6. Demandez √† l'utilisateur de choisir une case (ligne et colonne).
7. V√©rifiez si la case choisie contient une mine ou non.
8. Si c'est une mine, affichez la grille avec les mines visibles et terminez le jeu.
9. Sinon, affichez le nombre de mines adjacentes √† la case choisie.
10. R√©p√©tez les √©tapes 6 √† 9 jusqu'√† ce que l'utilisateur touche une mine ou que toutes les cases sans mines soient r√©v√©l√©es.
11. Affichez un message de victoire si l'utilisateur a gagn√©.